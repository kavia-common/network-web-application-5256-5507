{"is_source_file": true, "format": "Python", "description": "This file defines schedulers for periodic background tasks, specifically for pinging devices in a network monitoring context. It includes classes for wrapping APScheduler or a fallback threading mechanism, and functions to initialize and shut down the scheduler based on configuration.", "external_files": ["../config", "../models", "./ping"], "external_methods": ["get_config", "list_devices", "update_device", "ping_ip"], "published": ["init_scheduler", "shutdown_scheduler"], "classes": [{"name": "_BaseScheduler", "description": "Abstract base class for schedulers used to run periodic jobs."}, {"name": "_APSchedulerWrapper", "description": "Wrapper around APScheduler's BackgroundScheduler to schedule jobs if APScheduler is available."}, {"name": "_ThreadLoopScheduler", "description": "A lightweight fallback scheduler that runs jobs in a dedicated thread if APScheduler isn't available."}], "methods": [{"name": "None init_scheduler()", "description": "Initializes and starts the background scheduler based on environment configuration, choosing between APScheduler or a thread fallback.", "scope": "", "scopeKind": ""}, {"name": "None shutdown_scheduler()", "description": "Gracefully shuts down the scheduler if it is running.", "scope": "", "scopeKind": ""}, {"name": "None __init__(self)", "scope": "_ThreadLoopScheduler", "scopeKind": "class", "description": "unavailable"}, {"name": "None _ping_all_devices_once(timeout_ms: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None _run_loop(self)", "scope": "_ThreadLoopScheduler", "scopeKind": "class", "description": "unavailable"}, {"name": "_BaseScheduler _select_scheduler()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None add_job(self, func: Callable, seconds: int)", "scope": "_ThreadLoopScheduler", "scopeKind": "class", "description": "unavailable"}, {"name": "job()", "scope": "init_scheduler", "scopeKind": "function", "description": "unavailable"}, {"name": "None shutdown(self, wait: bool = True)", "scope": "_ThreadLoopScheduler", "scopeKind": "class", "description": "unavailable"}, {"name": "None start(self)", "scope": "_ThreadLoopScheduler", "scopeKind": "class", "description": "unavailable"}], "calls": ["list_devices", "update_device", "ping_ip"], "search-terms": ["scheduler", "ping", "background tasks", "APSscheduler", "device monitoring", "background job"], "state": 2, "file_id": 29, "knowledge_revision": 62, "git_revision": "", "ctags": [{"_type": "tag", "name": "_APSchedulerWrapper", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^class _APSchedulerWrapper(_BaseScheduler):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_BaseScheduler", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^class _BaseScheduler:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_ThreadLoopScheduler", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^class _ThreadLoopScheduler(_BaseScheduler):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^    def __init__(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "_APSchedulerWrapper", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^    def __init__(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "_ThreadLoopScheduler", "scopeKind": "class"}, {"_type": "tag", "name": "_logger", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^_logger = logging.getLogger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_ping_all_devices_once", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^def _ping_all_devices_once(timeout_ms: int) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(timeout_ms: int)"}, {"_type": "tag", "name": "_run_loop", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^    def _run_loop(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "_ThreadLoopScheduler", "scopeKind": "class"}, {"_type": "tag", "name": "_scheduler_instance", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^_scheduler_instance: Optional[_BaseScheduler] = None$/", "language": "Python", "typeref": "typename:Optional[_BaseScheduler]", "kind": "variable"}, {"_type": "tag", "name": "_select_scheduler", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^def _select_scheduler() -> _BaseScheduler:$/", "language": "Python", "typeref": "typename:_BaseScheduler", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "add_job", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^    def add_job(self, func: Callable, seconds: int) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, func: Callable, seconds: int)", "scope": "_APSchedulerWrapper", "scopeKind": "class"}, {"_type": "tag", "name": "add_job", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^    def add_job(self, func: Callable, seconds: int) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, func: Callable, seconds: int)", "scope": "_BaseScheduler", "scopeKind": "class"}, {"_type": "tag", "name": "add_job", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^    def add_job(self, func: Callable, seconds: int) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, func: Callable, seconds: int)", "scope": "_ThreadLoopScheduler", "scopeKind": "class"}, {"_type": "tag", "name": "init_scheduler", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^def init_scheduler() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "job", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^    def job():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "init_scheduler", "scopeKind": "function"}, {"_type": "tag", "name": "repo", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^from ..models import device_repository as repo$/", "language": "Python", "kind": "unknown", "nameref": "unknown:device_repository"}, {"_type": "tag", "name": "shutdown", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^    def shutdown(self, wait: bool = True) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, wait: bool = True)", "scope": "_APSchedulerWrapper", "scopeKind": "class"}, {"_type": "tag", "name": "shutdown", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^    def shutdown(self, wait: bool = True) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, wait: bool = True)", "scope": "_BaseScheduler", "scopeKind": "class"}, {"_type": "tag", "name": "shutdown", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^    def shutdown(self, wait: bool = True) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, wait: bool = True)", "scope": "_ThreadLoopScheduler", "scopeKind": "class"}, {"_type": "tag", "name": "shutdown_scheduler", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^def shutdown_scheduler() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^    def start(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "_APSchedulerWrapper", "scopeKind": "class"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^    def start(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "_BaseScheduler", "scopeKind": "class"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/network-web-application-5256-5507/NetworkWebApplication/backend/services/scheduler.py", "pattern": "/^    def start(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "_ThreadLoopScheduler", "scopeKind": "class"}], "hash": "09801ec1b3caf7630127217aab8713be", "format-version": 4, "code-base-name": "NetworkWebApplication", "filename": "NetworkWebApplication/backend/services/scheduler.py", "fields": [{"name": "_logger = logging.getLogger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[_BaseScheduler] _scheduler_instance", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"62": ""}]}